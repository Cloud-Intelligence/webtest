---
import { type CollectionEntry, getCollection } from 'astro:content';
import ContentLayout from '../../layouts/ContentLayout.astro';

export async function getStaticPaths() {
  const caseStudies = await getCollection('caseStudies');
  return caseStudies.map((caseStudy) => ({
    params: { slug: caseStudy.slug },
    props: caseStudy,
  }));
}

type Props = CollectionEntry<'caseStudies'>;

const caseStudy = Astro.props;
const { Content } = await caseStudy.render();
---

<ContentLayout title={`${caseStudy.data.title} - Cloud Intelligence`} contentType="case-study">
  <main class="min-h-screen bg-white">
    <article class="max-w-4xl mx-auto px-6 py-12">
      <!-- Navigation -->
      <nav class="mb-12">
        <a 
          href="/webtest/resources/case-studies"
          class="inline-flex items-center text-gray-600 hover:text-gray-900 font-sans text-sm font-medium transition-colors"
        >
          <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
          </svg>
          Case Studies
        </a>
      </nav>

      <!-- Article Header -->
      <header class="mb-12 max-w-3xl">
        <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-6 leading-tight font-sans tracking-tight">
          {caseStudy.data.title}
        </h1>
        
        <p class="text-xl text-gray-600 leading-relaxed mb-8 font-sans">
          {caseStudy.data.description}
        </p>
        
        <!-- Project Meta Info -->
        <div class="py-6 border-y border-gray-200">
          <div class="grid md:grid-cols-2 gap-6">
            <div>
              <h3 class="text-sm font-semibold text-gray-900 uppercase tracking-wide mb-3 font-sans">Project Details</h3>
              <div class="space-y-2">
                <div class="flex items-center text-sm">
                  <span class="text-gray-600 font-sans w-20">Client:</span>
                  <span class="text-gray-900 font-medium font-sans">{caseStudy.data.client}</span>
                </div>
                <div class="flex items-center text-sm">
                  <span class="text-gray-600 font-sans w-20">Industry:</span>
                  <span class="text-gray-900 font-medium font-sans">{caseStudy.data.industry}</span>
                </div>
                <div class="flex items-center text-sm">
                  <span class="text-gray-600 font-sans w-20">Date:</span>
                  <time datetime={caseStudy.data.pubDate.toISOString()} class="text-gray-900 font-medium font-sans">
                    {caseStudy.data.pubDate.toLocaleDateString('en-US', {
                      year: 'numeric',
                      month: 'long'
                    })}
                  </time>
                </div>
              </div>
            </div>
            
            <div>
              <h3 class="text-sm font-semibold text-gray-900 uppercase tracking-wide mb-3 font-sans">Technologies</h3>
              <div class="flex flex-wrap gap-2">
                {caseStudy.data.technologies.map((tech) => (
                  <span class="px-3 py-1 bg-gray-100 text-gray-700 text-xs rounded-full font-sans font-medium">
                    {tech}
                  </span>
                ))}
              </div>
            </div>
          </div>
        </div>
      </header>
      
      <!-- Quick Summary Cards -->
      <div class="grid md:grid-cols-3 gap-6 mb-12">
        <div class="p-6 bg-gray-50 rounded-lg">
          <h3 class="font-semibold text-gray-900 mb-2 font-sans">Challenge</h3>
          <p class="text-sm text-gray-600 leading-relaxed font-sans">{caseStudy.data.challenge}</p>
        </div>
        
        <div class="p-6 bg-gray-50 rounded-lg">
          <h3 class="font-semibold text-gray-900 mb-2 font-sans">Solution</h3>
          <p class="text-sm text-gray-600 leading-relaxed font-sans">{caseStudy.data.solution}</p>
        </div>
        
        <div class="p-6 bg-gray-50 rounded-lg">
          <h3 class="font-semibold text-gray-900 mb-2 font-sans">Key Results</h3>
          <ul class="text-sm text-gray-600 space-y-1">
            {caseStudy.data.results.slice(0, 2).map((result) => (
              <li class="flex items-start font-sans">
                <span class="text-green-600 mr-2">â€¢</span>
                {result}
              </li>
            ))}
          </ul>
        </div>
      </div>
      
      <!-- Article Content -->
      <div class="case-study-content">
        <Content />
      </div>
      
      <!-- Article Footer -->
      <footer class="mt-16 pt-8 border-t border-gray-200">
        <div class="flex items-center justify-between">
          <div class="flex items-center gap-6">
            <button class="flex items-center gap-2 px-4 py-2 rounded-lg border border-gray-300 hover:bg-gray-50 transition-colors font-sans">
              <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
              </svg>
              <span class="text-sm font-medium text-gray-700">Share</span>
            </button>
          </div>
          
          <div class="flex items-center gap-3">
            <a 
              href="/webtest/resources/case-studies"
              class="px-6 py-2 text-sm font-medium text-gray-700 hover:text-gray-900 transition-colors font-sans"
            >
              More Case Studies
            </a>
            <a 
              href="/webtest/contact"
              class="px-6 py-2 bg-gray-900 text-white text-sm font-medium rounded-lg hover:bg-gray-800 transition-colors font-sans"
            >
              Start Your Project
            </a>
          </div>
        </div>
      </footer>
    </article>
  </main>
</ContentLayout>

<style>
  @import '@/styles/shared/content-pages.scss';
</style>
